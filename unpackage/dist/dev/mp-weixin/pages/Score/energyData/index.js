(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/Score/energyData/index"],{290:
/*!*****************************************************************************************!*\
  !*** E:/HBuilderProjects/uni-App/main.js?{"page":"pages%2FScore%2FenergyData%2Findex"} ***!
  \*****************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4),n(/*! @dcloudio/uni-stat */5);e(n(/*! vue */2));function e(t){return t&&t.__esModule?t:{default:t}}t(e(n(/*! ./pages/Score/energyData/index.vue */291)).default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},291:
/*!********************************************************************!*\
  !*** E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue ***!
  \********************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var a=n(/*! ./index.vue?vue&type=template&id=1741529e&scoped=true& */292),i=n(/*! ./index.vue?vue&type=script&lang=js& */294);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n(/*! ./index.vue?vue&type=style&index=0&id=1741529e&scoped=true&lang=css& */296);var o=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */14),r=Object(o.default)(i.default,a.render,a.staticRenderFns,!1,null,"1741529e",null,!1,a.components,void 0);r.options.__file="E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue",e.default=r.exports},292:
/*!***************************************************************************************************************!*\
  !*** E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=template&id=1741529e&scoped=true& ***!
  \***************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var a=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=1741529e&scoped=true& */293);n.d(e,"render",function(){return a.render}),n.d(e,"staticRenderFns",function(){return a.staticRenderFns}),n.d(e,"recyclableRender",function(){return a.recyclableRender}),n.d(e,"components",function(){return a.components})},293:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=template&id=1741529e&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",function(){return a}),n.d(e,"staticRenderFns",function(){return s}),n.d(e,"recyclableRender",function(){return i}),n.d(e,"components",function(){});var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!1})},i=!1,s=[];a._withStripped=!0},294:
/*!*********************************************************************************************!*\
  !*** E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var a=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */295),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e.default=i.a},295:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(/*! ../../../api/index.js */37),i=(n(/*! ../../../common/index.js */27),{data:function(){return{userInfo:{},envData:{},deliverDetailResult:[],canvasW:412,canvasH:932,rate:1,scale:1,show:!1,bg1:"/static/score/cavsbg1.png",bg2:"/static/score/cavsbg2.png",bg3:"/static/score/cavsbg3.png",link:"/static/score/link.png",box3Height:432,contentH:1528,canvasDesH:932,onSave:!1}},onLoad:function(){var e=this;this.userInfo=t.getStorageSync("userInfo")||{},this.getData(),t.getSystemInfo({success:function(t){var n=t.windowWidth;e.rate=750/n,e.scale=412/750}}),this.context=t.createCanvasContext("share",this)},methods:{getData:function(){var t=this;(0,a.getEnvData)(this.userInfo.id).then(function(e){1==e.code&&(t.envData=e.data,setTimeout(function(){t.getCanvasContentHeight()},1e3))})},getCanvasContentHeight:function(){var e=this;t.createSelectorQuery().in(this).select("#box3").boundingClientRect(function(t){e.box3Height=t.height*e.rate,e.contentH=e.box3Height+590+506,e.canvasDesH=(e.contentH+186)*e.scale,e.canvasH=e.canvasDesH/e.rate,e.canvasW=412/e.rate}).exec()},preview:function(){this.show?t.showToast({title:"正在绘制中，请等待",icon:"none"}):(this.show=!0,this.drawImg())},drawImg:function(){var e=this,n=this.userInfo,a=n.nickname,i=n.id,s=n.headPic,o=this.envData,r=o.day,c=o.deliverNum,l=o.profit,d=o.carbon,h=o.tree,u=o.petroleum,f=o.electric,v=this.context,x=v.createLinearGradient(0,0,0,this.canvasH);(x.addColorStop(0,"#EB4B5A"),x.addColorStop(1,"#F19E4F"),v.setFillStyle(x),v.fillRect(0,0,this.canvasW,this.canvasH),this.drawCanvasImage(this.bg1,10,24,730,590),s)?(s=this.IMG_URL+this.userInfo.headPic,t.downloadFile({url:s,success:function(t){var n=t.tempFilePath;e.drawCanvasImage(n,64,64,120,120)}})):(s=t.getStorageSync("userDetail").userInfo.avatarUrl,t.downloadFile({url:s,success:function(t){var n=t.tempFilePath;e.drawCanvasImage(n,64,64,120,120)}}));this.drawCanvasText({text:r,x:620,y:134,fontSize:78,color:"#FF5F62",textAlign:"right",baseline:"top"}),this.drawCanvasText({text:a,x:68,y:206,fontSize:36,color:"#1E1E1E",textAlign:"left",baseline:"middle"}),this.drawCanvasText({text:"ID"+i,x:68,y:264,fontSize:24,color:"#909090",textAlign:"left",baseline:"middle"}),this.drawCanvasText({text:c,x:132,y:448,fontSize:32,color:"#1E1E1E",textAlign:"center",baseline:"middle"}),this.drawCanvasText({text:l,x:370,y:448,fontSize:32,color:"#1E1E1E",textAlign:"center",baseline:"middle"}),this.drawCanvasText({text:d,x:600,y:448,fontSize:32,color:"#1E1E1E",textAlign:"center",baseline:"middle"}),this.drawCanvasImage(this.bg2,10,602,730,506),this.drawCanvasText({text:h,x:162,y:972,fontSize:32,color:"#1E1E1E",textAlign:"right",baseline:"middle"}),this.drawCanvasText({text:u,x:382,y:972,fontSize:32,color:"#1E1E1E",textAlign:"right",baseline:"middle"}),this.drawCanvasText({text:f,x:602,y:972,fontSize:32,color:"#1E1E1E",textAlign:"right",baseline:"middle"}),this.drawCanvasImage(this.link,72,544,606,104);var g=this.deliverDetailResult.length;if(g>0){this.drawCanvasImage(this.bg3,10,1094,730,this.box3Height),this.drawCanvasText({text:"已为环境保护贡献了",x:68,y:1200,fontSize:30,color:"#1E1E1E",textAlign:"left",baseline:"middle"});for(var m=0;m<g;m++){var w=this.deliverDetailResult[m],b=1==w.type?"个":"kg",E=1270+56*m;this.drawCanvasImage("/static/score/cate.png",82,E,26,26),this.drawCanvasText({text:w.name,x:128,y:E+16,fontSize:26,color:"#1E1E1E",textAlign:"left",baseline:"middle"}),this.drawCanvasText({text:w.count,x:376,y:E+16,fontSize:28,color:"#1E1E1E",textAlign:"right",baseline:"middle"}),this.drawCanvasText({text:b,x:376,y:E+16,fontSize:26,color:"#1E1E1E",textAlign:"left",baseline:"middle"}),this.drawCanvasText({text:w.profit,x:642,y:E+16,fontSize:28,color:"#1E1E1E",textAlign:"right",baseline:"middle"}),this.drawCanvasImage("/static/money/gold.png",642,E,28,28)}this.drawCanvasImage(this.link,72,1024,606,104)}var C=this.contentH;this.drawCanvasImage("/static/score/qcode.png",157,C+15,120,120),this.drawCanvasText({text:"环保赚现金",x:486,y:C+32,fontSize:25,color:"#FFFFFF",textAlign:"center",baseline:"middle"}),this.drawCanvasText({text:"长按识别小程序码",x:486,y:C+105,fontSize:25,color:"#FFFFFF",textAlign:"center",baseline:"middle"}),v.draw()},drawCanvasImage:function(t,e,n,a,i){this.context.drawImage(t,e/this.rate*this.scale,n/this.rate*this.scale,a/this.rate*this.scale,i/this.rate*this.scale)},drawCanvasText:function(t){this.context.setFontSize(t.fontSize/this.rate*this.scale),this.context.setTextAlign(t.textAlign),this.context.setTextBaseline(t.baseline),this.context.setFillStyle(t.color),this.context.fillText(t.text,t.x/this.rate*this.scale,t.y/this.rate*this.scale)},drawCanvasArc:function(t,e,n,a,i){this.context.arc(t/this.rate*this.scale,e/this.rate*this.scale,n/this.rate*this.scale,a,i)},saveImg:function(){this.onSave?wx.showModal({title:"提示",content:"图片绘制中，请稍后重试",showCancel:!1}):(this.onSave=!0,t.canvasToTempFilePath({x:0,y:0,width:this.canvasW,height:this.canvasH,destWidth:412,destHeight:this.canvasDesH,canvasId:"share",success:function(e){this.onSave=!1,t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(){t.showToast({title:"保存成功",icon:"success",duration:2e3})}})}}))}}});e.default=i}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},296:
/*!*****************************************************************************************************************************!*\
  !*** E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=style&index=0&id=1741529e&scoped=true&lang=css& ***!
  \*****************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var a=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=1741529e&scoped=true&lang=css& */297),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e.default=i.a},297:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/HBuilderProjects/uni-App/pages/Score/energyData/index.vue?vue&type=style&index=0&id=1741529e&scoped=true&lang=css& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[290,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/Score/energyData/index.js.map
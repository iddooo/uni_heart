{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?8a95","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?c414","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?74ed","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?ab68","uni-app:///pages/My/energyData/index.vue","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?d61b","webpack:///C:/Users/dell/Desktop/uni_heart/pages/My/energyData/index.vue?a7dc"],"names":["createPage","Page"],"mappings":"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","file":"pages/My/energyData/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/My/energyData/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=329179cf&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=329179cf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"329179cf\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/My/energyData/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=329179cf&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<view id=\"canvas-content\">\r\n\t\t\t<view class=\"box1\">\r\n\t\t\t\t<image class=\"bg\" src=\"/pages/My/images/cavsbg1.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t<view class=\"user-photo\">\r\n\t\t\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t\t\t\t<image v-if=\"userInfo.headPic\" class=\"headpic\"  :src=\"userInfo.headPic\" mode=\"\"></image>\r\n\t\t\t\t\t\t<image v-else class=\"headpic\"  src=\"/static/index/head.png\" mode=\"\"></image>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t<open-data class=\"headpic\" type=\"userAvatarUrl\"></open-data>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"user-name\">\r\n\t\t\t\t\t{{userInfo.nickname}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"user-id\">\r\n\t\t\t\t\tID: {{userInfo.id}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"days\">\r\n\t\t\t\t\t{{envData.day}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-ct-ard save\">\r\n\t\t\t\t\t<view>{{envData.deliverNum}}</view>\r\n\t\t\t\t\t<view>{{envData.profit}}</view>\r\n\t\t\t\t\t<view>{{envData.carbon}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image class=\"link\" src=\"/pages/My/images/link.png\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"box2\">\r\n\t\t\t\t<image class=\"bg\" src=\"/pages/My/images/cavsbg2.png\" mode=\"widthFix\"></image>\r\n\t\t\t\r\n\t\t\t\t<view class=\"tree\">{{envData.tree}}</view>\r\n\t\t\t\t<view class=\"petroleum\">{{envData.petroleum}}</view>\r\n\t\t\t\t<view class=\"electric\">{{envData.electric}}</view>\r\n\t\t\t\t\r\n\t\t\t\t<image v-if=\"deliverDetailResult.length>0\" class=\"link\" src=\"/pages/My/images/link.png\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view id=\"box3\" class=\"box3\" v-if=\"deliverDetailResult.length>0\">\r\n\t\t\t\t<image class=\"bg bg3\" src=\"/pages/My/images/cavsbg3.png\"></image>\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t已为环境保护贡献了\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<ResourceList :list=\"list\"></ResourceList>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<!-- 生成图片 -->\r\n\t\t<view @click=\"preview\" class=\"preview\">\r\n\t\t\t生成我的环保战报\r\n\t\t</view>\r\n\t\t\r\n\t\t<view v-show=\"show\" class=\"model\" @click=\"show=false\"></view>\r\n\t\t<canvas v-show=\"show\" class=\"share\" canvas-id=\"share\" id=\"share\" :style=\"{width: canvasW + 'px', height: canvasH+ 'px'}\"></canvas>\r\n\t\t<button v-show=\"show\" @click=\"saveImg\" class=\"save-img\">保存图片</button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { getEnvData } from '../../../api/index.js'\r\n\timport { URL } from '../../../common/index.js'\r\n\timport ResourceList from '../../../components/ResourceList.vue'\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tResourceList\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tuserInfo:{},\r\n\t\t\t\tURL:URL,\r\n\t\t\t\tenvData:{},\r\n\t\t\t\tdeliverDetailResult:[],\r\n\t\t\t\tlist:[],\r\n\t\t\t\tcanvasW:412,\r\n\t\t\t\tcanvasH:932,\r\n\t\t\t\trate:1,\r\n\t\t\t\tscale:1,\r\n\t\t\t\tshow:false,\r\n\t\t\t\tbg1:'/pages/My/images/cavsbg1.png',\r\n\t\t\t\tbg2:'/pages/My/images/cavsbg2.png',\r\n\t\t\t\tbg3:'/pages/My/images/cavsbg3.png',\r\n\t\t\t\tlink:'/pages/My/images/link.png',\r\n\t\t\t\tbox3Height:432,\r\n\t\t\t\tcontentH:1528,\r\n\t\t\t\tcanvasDesH:932,\r\n\t\t\t\tonSave:false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.userInfo = uni.getStorageSync('userInfo') || {}\r\n\t\t\tthis.getData()\r\n\t\t\t// 设备像素比\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\tlet windowWidth = res.windowWidth\r\n\t\t\t\t\tthis.rate = 750 / windowWidth \r\n\t\t\t\t\tthis.scale = 412 / 750\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 创建context实例\r\n\t\t\tthis.context = uni.createCanvasContext('share', this)\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetData(){\r\n\t\t\t\tgetEnvData(this.userInfo.id).then(res=>{\r\n\t\t\t\t\tif(res.code==1){\r\n\t\t\t\t\t\tthis.envData = res.data\r\n\t\t\t\t\t\tthis.deliverDetailResult = res.data.deliverDetailResult\r\n\t\t\t\t\t\tthis.list = res.data.deliverDetailResult.reduce((a,b)=>{\r\n\t\t\t\t\t\t\tlet unit = b.type==1 ? \"个\":\"kg\"\r\n\t\t\t\t\t\t\ta.push({\r\n\t\t\t\t\t\t\t\timgUrl:b.imgUrl,\r\n\t\t\t\t\t\t\t\tname:b.name,\r\n\t\t\t\t\t\t\t\tprofit:b.profit,\r\n\t\t\t\t\t\t\t\tcountUnit:b.count + unit,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn a\r\n\t\t\t\t\t\t},[])\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.getCanvasContentHeight()\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取内容高度\r\n\t\t\tgetCanvasContentHeight(){\r\n\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\tquery.select('#box3').boundingClientRect(data => {\r\n\t\t\t\t\t//设计稿内容高度 1528 - 432\r\n\t\t\t\t\tthis.box3Height = data.height * this.rate\r\n\t\t\t\t\tthis.contentH = this.box3Height + 590 + 506\r\n\t\t\t\t\tthis.canvasDesH = (this.contentH + 186)* this.scale //186二维码高度\r\n\t\t\t\t\t// 画布宽高\r\n\t\t\t\t\tthis.canvasH = this.canvasDesH / this.rate\r\n\t\t\t\t\tthis.canvasW = 412 / this.rate\r\n\t\t\t\t\t\r\n\t\t\t\t}).exec();\r\n\t\t\t},\r\n\t\t\tpreview(){\r\n\t\t\t\tif(this.show){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"正在绘制中，请等待\",\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.show = true\r\n\t\t\t\tthis.drawImg()\r\n\t\t\t},\r\n\t\t\tdrawImg(){\r\n\t\t\t\tlet { nickname, id, headPic } = this.userInfo\r\n\t\t\t\tlet {day, deliverNum, profit, carbon,tree, petroleum, electric } = this.envData\r\n\t\t\t\t\r\n\t\t\t\tlet ctx = this.context\r\n\t\t\t\t// 渐变色背景\r\n\t\t\t\tconst grd = ctx.createLinearGradient(0, 0, 0, this.canvasH)\r\n\t\t\t\tgrd.addColorStop(0, '#EB4B5A')\r\n\t\t\t\tgrd.addColorStop(1, '#F19E4F')\r\n\t\t\t\tctx.setFillStyle(grd)\r\n\t\t\t\tctx.fillRect(0, 0, this.canvasW, this.canvasH)\r\n\t\t\t\t\r\n\t\t\t\t// 第一个背景框\r\n\t\t\t\tthis.drawCanvasImage(this.bg1, 10, 24, 730, 590)\r\n\t\t\t\t\r\n\t\t\t\t// 圆角\r\n\t\t\t\t// this.drawCanvasArc(124, 124, 60, 0, 2 * Math.PI)\r\n\t\t\t\t// ctx.clip();\r\n\t\t\t\t// 头像\r\n\t\t\t\tif(!headPic){\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\theadPic = '/static/index/head.png'\r\n\t\t\t\t\t\tthis.drawCanvasImage(headPic,64,64,120,120)\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tlet userDetail = uni.getStorageSync('userDetail')\r\n\t\t\t\t\t\theadPic = userDetail.userInfo.avatarUrl\r\n\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\turl:headPic,\r\n\t\t\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\t\tlet tempFilePath = res.tempFilePath\r\n\t\t\t\t\t\t\t\tthis.drawCanvasImage(tempFilePath,64,64,120,120)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\theadPic = '/static/index/head.png'\r\n\t\t\t\t\t\tthis.drawCanvasImage(headPic,64,64,120,120)\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\theadPic = this.userInfo.headPic\r\n\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\turl:headPic,\r\n\t\t\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\t\tlet tempFilePath = res.tempFilePath\r\n\t\t\t\t\t\t\t\tthis.drawCanvasImage(tempFilePath,64,64,120,120)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tthis.drawCanvasText({text:day,x:620,y:134,fontSize:78,color:\"#FF5F62\",textAlign:\"right\",baseline:\"top\"})\r\n\t\t\t\tthis.drawCanvasText({text:nickname,x:68,y:206,fontSize:36,color:\"#1E1E1E\",textAlign:\"left\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text:\"ID\"+id,x:68,y:264,fontSize:24,color:\"#909090\",textAlign:\"left\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text: deliverNum ,x:132,y:448,fontSize:32,color:\"#1E1E1E\",textAlign:\"center\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text: profit ,x:370,y:448,fontSize:32,color:\"#1E1E1E\",textAlign:\"center\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text: carbon,x:600,y:448,fontSize:32,color:\"#1E1E1E\",textAlign:\"center\",baseline:\"middle\"})\r\n\t\t\t\t\r\n\t\t\t\t// 第二个背景框\r\n\t\t\t\tthis.drawCanvasImage(this.bg2, 10, 602, 730, 506)\r\n\t\t\t\tthis.drawCanvasText({text: tree ,x:162,y:972,fontSize:32,color:\"#1E1E1E\",textAlign:\"right\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text: petroleum ,x:382,y:972,fontSize:32,color:\"#1E1E1E\",textAlign:\"right\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text: electric ,x:602,y:972,fontSize:32,color:\"#1E1E1E\",textAlign:\"right\",baseline:\"middle\"})\r\n\t\t\t\t\r\n\t\t\t\tthis.drawCanvasImage(this.link, 72, 544, 606, 104)\r\n\t\t\t\tlet len = this.deliverDetailResult.length\r\n\t\t\t\tif(len > 0){\r\n\t\t\t\t\tthis.drawCanvasImage(this.bg3, 10, 1094, 730, this.box3Height)\r\n\t\t\t\t\tthis.drawCanvasText({text:'已为环境保护贡献了',x:68,y:1200,fontSize:30,color:\"#1E1E1E\",textAlign:\"left\",baseline:\"middle\"})\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet h = 56 , top = 1270 ,l1=82, l2=128,l3=376,l4=642\r\n\t\t\t\t\tlet icon = '/pages/My/images/cate.png'\r\n\t\t\t\t\tlet gold = '/static/money/gold.png'\r\n\t\t\t\t\tfor(let i = 0 ; i < len ; i++ ){\r\n\t\t\t\t\t\tlet item = this.deliverDetailResult[i]\r\n\t\t\t\t\t\tlet unit = item.type==1 ? \"个\":\"kg\"\r\n\t\t\t\t\t\tlet t = top + h*i\r\n\t\t\t\t\t\tthis.drawCanvasImage(icon,l1,t,26,26)\r\n\t\t\t\t\t\tthis.drawCanvasText({text:item.name,x:l2,y:t+16,fontSize:26,color:\"#1E1E1E\",textAlign:\"left\",baseline:\"middle\"})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.drawCanvasText({text:item.count,x:l3,y:t+16,fontSize:28,color:\"#1E1E1E\",textAlign:\"right\",baseline:\"middle\"})\r\n\t\t\t\t\t\tthis.drawCanvasText({text:unit,x:l3,y:t+16,fontSize:26,color:\"#1E1E1E\",textAlign:\"left\",baseline:\"middle\"})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.drawCanvasText({text:item.profit,x:l4,y:t+16,fontSize:28,color:\"#1E1E1E\",textAlign:\"right\",baseline:\"middle\"})\r\n\t\t\t\t\t\tthis.drawCanvasImage(gold,l4,t,28,28)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.drawCanvasImage(this.link, 72, 1024, 606, 104)\r\n\t\t\t\t}\r\n\t\t\t\t// 二维码\r\n\t\t\t\tlet qrcode = '/pages/My/images/qcode.png'\r\n\t\t\t\tlet qtop = this.contentH\r\n\t\t\t\tthis.drawCanvasImage(qrcode,157,qtop+15,120,120)\r\n\t\t\t\tthis.drawCanvasText({text:\"环保赚现金\",x:486,y:qtop+32,fontSize:25,color:\"#FFFFFF\",textAlign:\"center\",baseline:\"middle\"})\r\n\t\t\t\tthis.drawCanvasText({text:\"长按识别小程序码\",x:486,y:qtop+105,fontSize:25,color:\"#FFFFFF\",textAlign:\"center\",baseline:\"middle\"})\r\n\t\t\t\tctx.draw()\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdrawCanvasImage(path,x,y,dx,dy){\r\n\t\t\t\tthis.context.drawImage(path,x/this.rate*this.scale,y/this.rate*this.scale,dx/this.rate*this.scale,dy/this.rate*this.scale,)\r\n\t\t\t},\r\n\t\t\tdrawCanvasText(obj){\r\n\t\t\t\tthis.context.setFontSize(obj.fontSize/this.rate*this.scale)\r\n\t\t\t\tthis.context.setTextAlign(obj.textAlign)\r\n\t\t\t\tthis.context.setTextBaseline(obj.baseline)\r\n\t\t\t\tthis.context.setFillStyle(obj.color)\r\n\t\t\t\tthis.context.fillText(obj.text, obj.x/this.rate*this.scale, obj.y/this.rate*this.scale)\t\r\n\t\t\t},\r\n\t\t\tdrawCanvasArc(x,y,r,s,e){\r\n\t\t\t\tthis.context.arc(x/this.rate*this.scale,y/this.rate*this.scale,r/this.rate*this.scale,s,e)\r\n\t\t\t},\r\n\t\t\tsaveImg(){\r\n\t\t\t\tif(this.onSave){\r\n\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '图片绘制中，请稍后重试',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t })\r\n\t\t\t\t\t return\r\n\t\t\t\t}\r\n\t\t\t\tthis.onSave = true\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t  x: 0,\r\n\t\t\t\t  y: 0,\r\n\t\t\t\t  width: this.canvasW,\r\n\t\t\t\t  height: this.canvasH,\r\n\t\t\t\t  destWidth: 412,\r\n\t\t\t\t  destHeight: this.canvasDesH,\r\n\t\t\t\t  canvasId: 'share',\r\n\t\t\t\t  success: function(res) {\r\n\t\t\t\t\t  this.onSave = false\r\n\t\t\t\t    // 在H5平台下，tempFilePath 为 base64\r\n\t\t\t\t    // console.log(res.tempFilePath)\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tvar a = document.createElement('a');\r\n\t\t\t\t\ta.setAttribute('href',res.tempFilePath);//图片地址\r\n\t\t\t\t\ta.setAttribute('download','');//下载时文件名称\r\n\t\t\t\t\tvar evobj = document.createEvent('MouseEvents'); \r\n\t\t\t\t\tevobj.initMouseEvent('click',true,true,window,0,0,0,0,0,false,false,true,false,0,null)\r\n\t\t\t\t\ta.dispatchEvent(evobj)\r\n\t\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath:res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess:()=>{\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t  title: '保存成功',\r\n\t\t\t\t\t\t\t\t  icon: 'success',\r\n\t\t\t\t\t\t\t\t  duration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t  } \r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.page{\r\n\t\tbackground: linear-gradient(202deg,rgba(241,158,79,1) 0%,rgba(235,75,90,1) 100%);;\r\n\t\tpadding-bottom: 40rpx;\r\n\t}\r\n\t.box1{\r\n\t\tpadding-top: 24rpx;\r\n\t\theight: 590rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 3;\r\n\t}\r\n\t.bg{\r\n\t\twidth: 730rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\t\t\r\n\t\ttransform: translateX(-50%);\r\n\t\tz-index: -1;\r\n\t}\r\n\t.link{\r\n\t\twidth: 606rpx;\r\n\t\theight: 104rpx;\r\n\t\tposition:absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tbottom: -34rpx;\r\n\t\tz-index: 1;\r\n\t}\r\n\t.box2{\r\n\t\theight: 506rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\tmargin-top: -12rpx;\r\n\t}\r\n\t.box3{\r\n\t\tmin-height: 412rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 1;\r\n\t\tmargin-top: -12rpx;\r\n\t}\r\n\t.user-photo{\r\n\t\twidth:120rpx;\r\n\t\theight:120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\toverflow: hidden;\r\n\t\tposition: absolute;\r\n\t\tleft: 64rpx;\r\n\t\ttop: 44rpx;\r\n\t}\r\n\t.user-photo .headpic{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t.user-name{\r\n\t\tposition: absolute;\r\n\t\tleft: 68rpx;\r\n\t\ttop: 186rpx;\r\n\t\tfont-size:36rpx;\r\n\t\tfont-weight:500;\r\n\t\tcolor:rgba(30,30,30,1);\r\n\t\tline-height:50rpx;\r\n\t}\r\n\t\t\r\n\t.user-id{\r\n\t\tposition: absolute;\r\n\t\tleft: 68rpx;\r\n\t\ttop: 244rpx;\r\n\t\tfont-size:24rpx;\r\n\t\tcolor:rgba(144,144,144,1);\r\n\t\tline-height:34rpx;\r\n\t}\r\n\t.days{\r\n\t\tposition: absolute;\r\n\t\tright: 124rpx;\r\n\t\ttop: 92rpx;\r\n\t\tfont-size:78rpx;\r\n\t\tfont-family:DINAlternate-Bold,DINAlternate;\r\n\t\tfont-weight:bold;\r\n\t\tcolor:rgba(235,75,90,1);\r\n\t\tline-height:92rpx;\r\n\t}\r\n\t.save{\r\n\t\tposition: absolute;\r\n\t\ttop: 420rpx;\r\n\t\tleft: 20rpx;\r\n\t\twidth: 710rpx;\r\n\t}\r\n\t.save view{\r\n\t\twidth: 33.33%;\r\n\t\ttext-align: center;\r\n\t\tfont-size:32rpx;\r\n\t\tfont-family:DINAlternate-Bold,DINAlternate;\r\n\t\tfont-weight:bold;\r\n\t\tcolor:rgba(30,30,30,1);\r\n\t\tline-height:38rpx;\r\n\t}\r\n\t.tree,.petroleum,.electric{\r\n\t\tfont-size:32rpx;\r\n\t\tfont-family:DINAlternate-Bold,DINAlternate;\r\n\t\tfont-weight:bold;\r\n\t\tcolor:rgba(30,30,30,1);\r\n\t\tline-height:38rpx;\r\n\t\tposition: absolute;\r\n\t\ttop: 350rpx;\r\n\t}\r\n\t.tree{\r\n\t\tright: 580rpx;\r\n\t}\r\n\t.petroleum{\r\n\t\tright: 360rpx;\r\n\t}\r\n\t.electric{\r\n\t\tright: 140rpx;\r\n\t}\r\n\t.title{\r\n\t\tpadding-top: 92rpx;\r\n\t\tpadding-left: 68rpx;\r\n\t\tfont-weight:500;\r\n\t\tcolor:rgba(30,30,30,1);\r\n\t\tline-height:42rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tmargin-bottom: 46rpx;\r\n\t}\r\n\t.list{\r\n\t\tpadding-left: 84rpx;\r\n\t\tpadding-right: 70rpx;\r\n\t}\r\n\t.bg3{\r\n\t\theight: 100%;\r\n\t}\r\n\t.box3{\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n\t.preview{\r\n\t\tmargin: 26rpx auto 0;\r\n\t\twidth:300rpx;\r\n\t\theight:66rpx;\r\n\t\tborder-radius:33rpx;\r\n\t\tborder:2rpx solid rgba(255,255,255,1);\r\n\t\tline-height: 66rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t.model{\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0,0,0,.75);\r\n\t\tz-index: 9;\r\n\t}\r\n\t.share{\r\n\t\tposition: absolute!important;\r\n\t\tleft: 50%;\r\n\t\ttop: 76rpx;\r\n\t\ttransform: translateX(-50%);\r\n\t\tz-index: 10;\r\n\t}\r\n\t.share{\r\n\t\tbackground: linear-gradient(202deg,rgba(241,158,79,1) 0%,rgba(235,75,90,1) 100%);\r\n\t}\r\n\t\t\r\n\t.save-img{\r\n\t\twidth:278rpx;\r\n\t\theight:64rpx;\r\n\t\tbackground:rgba(255,95,98,1);\r\n\t\tborder-radius:62rpx;\r\n\t\tline-height: 64rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 26rpx;\r\n\t\tposition: absolute;\r\n\t\tbottom: 36rpx;\r\n\t\tleft: 50%;\r\n\t\ttransform:translateX(-50%);\r\n\t\tz-index: 10;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=329179cf&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=329179cf&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606793542695\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}